sap.ui.define(["sap/ui/demo/cart/model/LocalStorageModel","sap/ui/util/Storage"],function(t,e){"use strict";QUnit.module("LocalStorageModel - Defaults");QUnit.test("Should intialize the local storage model with its defaults",function(e){var o=new t;e.strictEqual(o._STORAGE_KEY,"LOCALSTORAGE_MODEL","Default storage key was set");o.destroy()});QUnit.module("LocalStorageModel - Parameters",{beforeEach:function(){this.fnLoadData=sinon.stub(t.prototype,"_loadData");this.oStorage=new e;this.fnPutStub=sinon.stub(this.oStorage,"put");this.fnGetStub=sinon.stub(this.oStorage,"get");this.oLocalStorageModel=new t("MY_KEY",{1:2,3:4});this.oLocalStorageModel._storage=this.oStorage;this.oLocalStorageModel._bDataLoaded=true;this.fnLoadData.restore()},afterEach:function(){this.fnPutStub.restore();this.fnGetStub.restore();this.oLocalStorageModel.destroy()}});QUnit.test("Should intialize the local storage model properly",function(t){t.ok(this.fnLoadData.calledOnce," The data was read from the local storage by calling the constructor");t.deepEqual(this.oLocalStorageModel.getData(),{1:2,3:4},"The initial data was set on the model");t.strictEqual(this.oLocalStorageModel.iSizeLimit,1e6,"The size limit on the model has been increased")});QUnit.test("Should read the data from the local storage",function(t){this.oLocalStorageModel._loadData();t.ok(this.fnGetStub.calledOnce,"The data was read from the local storage");t.ok(this.fnGetStub.calledWith("MY_KEY"),"The custom storage key was used")});QUnit.test('Should write the data to the local storage when calling "setProperty" on the model',function(t){this.oLocalStorageModel.setProperty("/foo","bar");t.ok(this.fnPutStub.calledOnce,"The data was written to the local storage");t.ok(this.fnPutStub.calledWith("MY_KEY"),"The custom storage key was used")});QUnit.test('Should write the data to the local storage when calling "setData" on the model',function(t){this.oLocalStorageModel.setData({foo:"bar"});t.ok(this.fnPutStub.calledOnce,"The data was written to the local storage");t.ok(this.fnPutStub.calledWith("MY_KEY"),"The custom storage key was used")});QUnit.test('Should write the data to the local storage when calling "refresh" on the model',function(t){this.oLocalStorageModel.refresh(true);t.ok(this.fnPutStub.calledOnce,"The data was written to the local storage");t.ok(this.fnPutStub.calledWith("MY_KEY"),"The custom storage key was used")})});